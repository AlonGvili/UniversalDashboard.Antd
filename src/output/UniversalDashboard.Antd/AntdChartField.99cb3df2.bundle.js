(window.webpackJsonpAntd=window.webpackJsonpAntd||[]).push([[31],{1160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=n(0),o=(a=s)&&a.__esModule?a:{default:a};var c="antd-pro-charts-field-field",l="antd-pro-charts-field-label",u="antd-pro-charts-field-number";t.default=function(e){var t=e.label,n=e.value,a=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["label","value"]);return o.default.createElement("div",r({className:c},a),o.default.createElement("span",{className:l},t),o.default.createElement("span",{className:u},n))},e.exports=t.default},1359:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var a=n(0),r=n.n(a),s=n(1160),o=n.n(s),c=n(35),l=n(560),u=n(64),d=n(80);const i=Object(u.a)("ud-dashboard");function b({id:e,...t}){const[{attributes:n}]=Object(l.a)(e,t),{label:a,autoRefresh:s,refreshInterval:u}=n,b=Object(d.a)(e),{data:f,status:h,error:v}=Object(c.useQuery)(e,()=>fetch(b,{headers:{dashboardid:i,UDConnectionId:UniversalDashboard.connectionId}}).then(e=>e.json()).then(e=>e),{refetchInterval:s&&u,refetchIntervalInBackground:s,refetchOnMount:!0,refetchOnWindowFocus:!1});return"loading"===h?null:"error"===h?r.a.createElement("p",null,"Error: ".concat(v.message)):r.a.createElement(o.a,{id:e,label:UniversalDashboard.renderComponent(a),value:UniversalDashboard.renderComponent(f)})}b.displayName="AntdChartField"},560:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),s=n(80);function o(e,t){const{content:n,...o}=t,[c,l]=Object(a.useState)({content:n,attributes:o});!function(e,t){const n=r.a.useRef();n.current=t,r.a.useEffect(()=>{const t=UniversalDashboard.subscribe(e,n.current);return()=>UniversalDashboard.unsubscribe(t)},[e])}(e,(e,t)=>{switch(t.type){case"setState":console.log("dashboard event set state",t.state),l(e=>({attributes:{...e.attributes,...t.state.attributes},content:{...t.state.content}}));break;case"requestState":console.log("REQUEST_STATE: ",c),UniversalDashboard.post("/api/internal/component/element/sessionState/".concat(t.requestId),{state:c});break;case"addElement":l(e=>({...e,content:e.content.concat(t.elements)}));break;case"removeElement":l(e=>{console.log("remove element event",t);let n=e.content.filter(e=>e.id!==t.componentId);return{...e,content:[...n]}});break;case"clearElement":l(e=>({...e,content:[]}));break;case"syncElement":u()}});const u=()=>{UniversalDashboard.get(Object(s.a)(e),e=>l(t=>({...t,content:e})))};return[c,u,l]}}}]);
(window.webpackJsonpAntd=window.webpackJsonpAntd||[]).push([[74],{1371:function(e,t,n){"use strict";n.r(t);n(859);var a=n(860),r=n.n(a),s=(n(236),n(89)),c=n.n(s),o=(n(247),n(159)),i=n.n(o),u=n(0),d=n.n(u),l=n(569),b=n(148),f=n(568),p=n(34);const v=Object(b.a)("ud-dashboard");function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object(b.a)("ud-dashboard");t.default=({id:e,...t})=>{const[{attributes:n}]=Object(l.a)(e,t),{autoRefresh:a,refreshInterval:s}=n,{data:o,status:u,error:b,isFetching:m}=function(e,t,n){const a=Object(f.a)(e);return Object(p.useQuery)(["statistic",{id:e}],async()=>{const e=await fetch(a,{headers:{dashboardid:v,UDConnectionId:UniversalDashboard.connectionId}});return await e.json()},{refetchInterval:t&&n,refetchIntervalInBackground:t})}(e,a,s);return"loading"===u?d.a.createElement(i.a,{spinning:m,size:"small"}):"error"===u?d.a.createElement(c.a,{message:"Error in AntdStatistic component",description:b.message,type:"error"}):d.a.createElement(r.a,h({},n,{prefix:n.prefix&&UniversalDashboard.renderComponent(n.prefix),suffix:n.suffix&&UniversalDashboard.renderComponent(n.suffix),value:o}))}},568:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(10),r=n(570),s=n.n(r);const c=e=>{const t="?".concat(s.a.stringify(Object(a.i)()));return"".concat("/api/internal/component/element/").concat(e).concat(t)}},569:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a),s=n(568);function c(e,t){const n=r.a.useRef();n.current=t,r.a.useEffect(()=>{const t=UniversalDashboard.subscribe(e,n.current);return()=>UniversalDashboard.unsubscribe(t)},[e])}const o=(e="",t={})=>{UniversalDashboard.publish("element-event",{type:"clientEvent",eventId:"".concat(elementId).concat(e),eventName:e,eventData:t})};function i(e,t){const{content:n,...r}=t,[i,u]=Object(a.useState)({content:n,attributes:r,onEvent:o});c(e,(e,t)=>{switch(t.type){case"setState":console.log("dashboard event set state",t.state),u(e=>({attributes:{...e.attributes,...t.state.attributes},content:{...t.state.content}}));break;case"requestState":console.log("REQUEST_STATE: ",i),UniversalDashboard.post("/api/internal/component/element/sessionState/".concat(t.requestId),{state:i});break;case"addElement":u(e=>({...e,content:e.content.concat(t.elements)}));break;case"removeElement":u(e=>{console.log("remove element event",t);let n=e.content.filter(e=>e.id!==t.componentId);return{...e,content:[...n]}});break;case"clearElement":u(e=>({...e,content:[]}));break;case"syncElement":d()}});const d=()=>{UniversalDashboard.get(Object(s.a)(e),e=>u(t=>({...t,content:e})))};return[i,d,u]}}}]);